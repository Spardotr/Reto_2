class Libro:
    def __init__(self, titulo, autor, isbn):
        self.titulo = titulo
        self.autor = autor
        self.isbn = isbn
        self.estado = 'disponible'


class Usuario:
    def __init__(self, nombre, id_usuario):
        self.nombre = nombre
        self.id_usuario = id_usuario


class Biblioteca:
    def __init__(self):
        self.libros = []
        self.usuarios = []

    def registrar_libro(self, libro):
        self.libros.append(libro)

    def registrar_usuario(self, usuario):
        self.usuarios.append(usuario)

    def prestar_libro(self, libro, usuario):
        if libro.estado == 'disponible':
            libro.estado = 'prestado'
            print(f"Libro {libro.titulo} prestado a {usuario.nombre}")
        else:
            print(f"Libro {libro.titulo} no está disponible")

    def devolver_libro(self, libro, usuario):
        if libro.estado == 'prestado':
            libro.estado = 'disponible'
            print(f"Libro {libro.titulo} devuelto por {usuario.nombre}")
        else:
            print(f"Libro {libro.titulo} no está en préstamo")

    def consultar_estado_libro(self, libro):
        return libro.estado


# Ejemplo de uso del sistema
biblioteca = Biblioteca()
libro1 = Libro("El Quijote", "Miguel de Cervantes", "123456789")
usuario1 = Usuario("Juan Perez", 1)

biblioteca.registrar_libro(libro1)
biblioteca.registrar_usuario(usuario1)
biblioteca.prestar_libro(libro1, usuario1)
estado = biblioteca.consultar_estado_libro(libro1)
print(f"Estado del libro: {estado}")
biblioteca.devolver_libro(libro1, usuario1)
estado = biblioteca.consultar_estado_libro(libro1)
print(f"Estado del libro: {estado}")
